<style>
.scrollspy-example {
  position: relative;
}
</style>

<h1> Dashboard </h1>
<hr>
<div class="row">
        <div class="col-xl-3 col-sm-6 mb-3">
          <div class="card text-white bg-primary o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-graduation-cap"></i>
              </div>
              <div class="mr-5">26 New Prof!</div>
            </div>
            <a class="card-footer text-white clearfix small z-1" href="#list-item-1">
              <span class="float-left">View Details</span>
              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-3">
          <div class="card text-white bg-warning o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-exclamation-triangle"></i>
              </div>
              <div class="mr-5">11 New Reportings!</div>
            </div>
            <a class="card-footer text-white clearfix small z-1" href="#list-item-2">
              <span class="float-left">View Details</span>
              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-3">
          <div class="card text-white bg-success o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-shopping-cart"></i>
              </div>
              <div class="mr-5">123 New Orders!</div>
            </div>
            <a class="card-footer text-white clearfix small z-1" href="#list-item-3">
              <span class="float-left">View Details</span>
              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-3">
          <div class="card text-white bg-danger o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-bookmark"></i>
              </div>
              <div class="mr-5">13 New Bookings!</div>
            </div>
            <a class="card-footer text-white clearfix small z-1" href="#list-item-4">
              <span class="float-left">View Details</span>
              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
</div>
    <div data-spy="scroll" data-target="#list-example" data-offset="0" class="scrollspy-example">

    <h4 id="list-item-1">Item 1</h4>
    <hr>
    <br>
    <div class="row">
  <% @profs.each do |prof| %>
  <% if prof.confirmed? %>
    <% if prof.authorized == false %>
    <div class="col-lg-3 col-sm-4 portfolio-item">
      <div class="card h-100">
        <div class="card-header">
          <%= prof.name + " " + prof.surname %>
        </div>
        <div class="card-body">
          <%= mail_to prof.email %>
        </div>
      <ul class="list-group list-group-flush">
          <%= link_to "Autorizza",  admin_authorize_route_path(prof.id), method: :post, class:"list-group-item list-group-item-success" %>
      </ul>
  </div>
  </div>
    <% else %>
    <div class="col-lg-3 col-sm-4 portfolio-item">
      <div class="card h-100">
        <div class="card-header">
          <%= prof.name + " " + prof.surname %>
        </div>
        <div class="card-body">
          <%= mail_to prof.email %>
        </div>
      <ul class="list-group list-group-flush">
          <%= link_to "Blocca",  admin_authorize_route_path(prof.id), method: :post, class:"list-group-item list-group-item-danger" %>
      </ul>
  </div>
  </div>
    <% end %>
    <%end%>
  <% end %>
</div>


  <h4 id="list-item-2">Item 2</h4>
  <hr>
  <br>
  <% @reportings.each do |reporting| %>
  <div class="card">
    <div class="card-body">

      <h4 class="card-title"><%= image_tag(reporting.tool.photo.thumb, alt: "toolphoto.jpeg") %> <%= reporting.tool.name %> <small> <%= t('tools.show.quantity') + ": " + reporting.quantity.to_s %> </small> </h4>
      <p class="card-text"> <%= reporting.description %> </p>
      <p class="card-text"> <%= reporting.lab.name %> </p>
    </div>
  </div>
<% end %>


  <h4 id="list-item-3">Item 3</h4>
  <hr>
  <br>
  <% @requests.each do |request| %>
    <div class="card">
      <% if request.prof.present? %>
        <h5> <%= request.prof.name + " " + request.prof.surname %> </h5>
      <% else %>
        <h5> <%= request.technical.name + " " + request.technical.surname %> </h5>
      <% end %>
      <%= request.name %>
      <br>
      <%= request.description %>
      <br>
      <%= request.goal %>
      <% if current_admin.role == 0 %>
      <%= form_for ([:admin, request]) do |t|  %>
        <%= hidden_field(:request, :approved, :value => true) %>
        <%= t.submit "Conferma Richiesta", data: {confirm: t('admin.tools.index.confirm')}, class: "btn btn-warning btn-sm" %>
      <% end %>
      <% elsif current_admin.role == 1 %>
      <%= form_for ([:admin, request]) do |t|  %>
        <%= hidden_field(:request, :money, :value => true) %>
        <%= t.submit "Conferma Richiesta", data: {confirm: t('admin.tools.index.confirm')}, class: "btn btn-warning btn-sm" %>
      <% end %>
      <% else %>
      <%= form_for ([:admin, request]) do |t|  %>
        <%= hidden_field(:request, :arrived, :value => true) %>
        <%= t.submit "Conferma Richiesta", data: {confirm: t('admin.tools.index.confirm')}, class: "btn btn-warning btn-sm" %>
      <% end %>
      <% end %>
    </div>
  <% end %>

  <h4 id="list-item-4">Item 4</h4>
  <hr>
  <br>
  <div class="row">
    <% @bookings.each do |booking| %>
      <div class="col-md-4">
        <div class="card h-100">
          <div class="card-header">
             <p class="card-title"> <%= image_tag(booking.tool.photo.thumb, alt:"Photo") %> <%= booking.tool.name %> </p>
               <h5> <%= booking.prof.name + " " + booking.prof.surname %> </h5>

          </div>
        <div class="card-body">
        <p class="card-text">  <b>
            dal: <%= " " + booking.start_date.strftime("%d/%m/%y %k:%M") + " " %>

            al: <%= " " + booking.end_date.strftime("%d/%m/%y %k:%M") %>
          </b> </p>
          <p class="card-text"> <i> <%= t('tools.show.quantity') + " " + booking.quantity.to_s%> </i> </p>
          <p class="card-text"> <%= booking.goal %> </p>


        </div>
        <%= form_for ([:admin, booking]) do |t|  %>
          <%= hidden_field(:book, :confirmed, :value => true) %>
          <%= t.submit "Conferma Prenotazione", class:"btn btn-success btn-block" %>
        <% end %>

      <ul class="list-group list-group-flush">

          <%= link_to fa_icon('trash') + " Rifiuta", admin_book_path(booking), method: :delete, data: {confirm: t('.confirm')}, class:"list-group-item list-group-item-danger"%>



      </ul>
      </div>
    </div>
    <% end %>
  </div>


</div>
